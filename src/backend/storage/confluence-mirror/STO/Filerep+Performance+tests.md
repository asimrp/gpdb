<span id="title-text"> Storage & Access : Filerep Performance tests </span>
===========================================================================

This page last changed on Dec 16, 2009 by goldsa1.

Overview
--------

This page summarizes the various performance tests and results related to the online segment resynchronization changes. In general we are looking for any regressions that may have been introduced by this change. The comparision is done against the Main code branch, which is the branch that the filerep code base is based on.

Goals
-----

at the moment, the performance goals are defined as:

-   Take less than 15 seconds for failover time. That is the time when failure is detected to full recovery.
-   Take less than 24 hours total downtime for upgrade from 3.3 to 3.4.
-   No performance regression for read related transactions.
-   No performance regression for AO bulk loads transactions
-   No/Minimum performance regression for small (write related) transactions for Append Only and Heap Data Store and for bulk (write related) transactions for Heap Data Store.

Testing Method
--------------

at the moment performance testing is manual, in order to find, diagnose and fix any serious issues. In a later stage testing will become fully automated in the same manner in which the nightly performance runs are done for Main branch.

Test Results
------------

#### Write Transactions

the write performance tests focus on regressions and not on an actual throughput goal, therefore the results will reflect the increase or decrease of performance in comparison to the performance of identical operations on the Main branch. Measurements of filerep vs. Main will be taken on the same hardware and identical environment and settings.

###### single host

the first set of tests was taken on a single host GPDB installation. while this isn't a real world scenario, it may aid in discovering serious problems that will later on reflect on a real installation. The configuration tested is 1 master + 2 primary + 2 mirrors. Table used is lineitem (16 columns, mixed types, 125 byte raw line width) The results of multiple runs is averaged, and this is ok since there was very minimal variance between runs.

<img src="plugins/servlet/confluence/placeholder/unknown-macro" class="wysiwyg-unknown-macro" />

These results show that filerep loads data faster on a single host installation. Since both Main and filerep were CPU bound in these tests, filerep was likely faster because it did not need to waste more CPU cycles to execute the insert logic on the mirror segments and had more I/O bandwidth to perform the synchronization with the mirrors instead.

###### multi host

in progress soon

Document generated by Confluence on May 17, 2016 19:14


